<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCORM Exit Button Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .exit-button {
            background: #dc3545;
        }
        .exit-button:hover {
            background: #c82333;
        }
        .status {
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <h1>SCORM Exit Button Test</h1>
    <p>This page simulates SCORM content with various exit buttons to test the functionality.</p>
    
    <div class="status" id="status">
        <strong>Status:</strong> Ready to test exit buttons
    </div>
    
    <h2>Test Exit Buttons</h2>
    <p>Click any of these buttons to test the exit functionality:</p>
    
    <button class="test-button courseExit" onclick="testExit('courseExit')">Exit Assessment (courseExit class)</button>
    <button class="test-button courseExit--standard" onclick="testExit('courseExit--standard')">Exit Assessment (courseExit--standard class)</button>
    <button class="test-button exit-button" onclick="testExit('exit-button')">Exit Assessment (exit-button class)</button>
    <button class="test-button" onclick="testExit('text-exit')">Exit Assessment (text contains exit)</button>
    <button class="test-button" onclick="testExit('text-finish')">Finish Assessment (text contains finish)</button>
    <button class="test-button" onclick="testExit('text-complete')">Complete Assessment (text contains complete)</button>
    
    <input type="button" class="test-button" value="EXIT ASSESSMENT" onclick="testExit('input-exit')">
    <input type="button" class="test-button" value="Finish Assessment" onclick="testExit('input-finish')">
    
    <a href="#" class="test-button" onclick="testExit('link-exit'); return false;">Exit Assessment (link)</a>
    
    <button class="test-button" data-action="exit" onclick="testExit('data-action')">Exit Assessment (data-action)</button>
    <button class="test-button" data-exit="true" onclick="testExit('data-exit')">Exit Assessment (data-exit)</button>
    
    <h2>Test Results</h2>
    <div id="results"></div>
    
    <script>
        let testCount = 0;
        
        function testExit(buttonType) {
            testCount++;
            const status = document.getElementById('status');
            const results = document.getElementById('results');
            
            status.innerHTML = `<strong>Status:</strong> Testing ${buttonType} button (Test #${testCount})`;
            
            // Simulate SCORM API calls
            console.log(`Testing exit button: ${buttonType}`);
            
            // Simulate data saving
            setTimeout(() => {
                console.log('Simulating SCORM data save...');
                status.innerHTML = `<strong>Status:</strong> Saving SCORM data...`;
            }, 100);
            
            // Simulate redirect
            setTimeout(() => {
                console.log('Simulating redirect to topic view...');
                status.innerHTML = `<strong>Status:</strong> Redirecting to topic view...`;
                
                // Add result
                const resultDiv = document.createElement('div');
                resultDiv.innerHTML = `<strong>Test #${testCount}:</strong> ${buttonType} button clicked successfully - Data saved and redirect initiated`;
                resultDiv.style.cssText = 'margin: 5px 0; padding: 5px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 3px;';
                results.appendChild(resultDiv);
                
                // Reset status
                setTimeout(() => {
                    status.innerHTML = `<strong>Status:</strong> Ready for next test`;
                }, 2000);
            }, 1000);
        }
        
        // Simulate SCORM API
        window.API = {
            _initialized: true,
            LMSCommit: function() {
                console.log('SCORM LMSCommit called');
                return 'true';
            },
            LMSFinish: function() {
                console.log('SCORM LMSFinish called');
                return 'true';
            }
        };
        
        window.API_1484_11 = {
            Commit: function() {
                console.log('SCORM 2004 Commit called');
                return 'true';
            },
            Terminate: function() {
                console.log('SCORM 2004 Terminate called');
                return 'true';
            }
        };
        
        console.log('SCORM Exit Button Test Page Loaded');
        console.log('SCORM API initialized:', window.API._initialized);
    </script>
</body>
</html>
