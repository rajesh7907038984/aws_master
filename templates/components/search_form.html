{% load static %}
<!-- Reusable Search Form Component -->
<form class="flex w-full shadow-sm rounded-xl overflow-hidden bg-gray-50 ring-1 ring-gray-200 focus-within:ring-2 focus-within:ring-primary-500 transition-all" method="GET" action="{% url 'users:search' %}">
    <!-- Category Selector -->
    <div class="relative {% if is_mobile %}flex-shrink-0{% endif %}">
        <select name="category" class="h-10 {% if is_mobile %}pl-2 sm:pl-3 pr-5 sm:pr-6 text-xs sm:text-sm{% else %}pl-4 pr-8 text-sm{% endif %} bg-transparent border-0 rounded-l-xl text-gray-600 focus:outline-none focus:ring-0 cursor-pointer appearance-none border-r border-gray-300">
            <option value="all" selected>{% if is_mobile %}All{% else %}Select Option{% endif %}</option>
            <option value="courses">Courses</option>
            {% if user.is_authenticated and user.role in 'globaladmin,superadmin,admin,instructor' %}
            <option value="users">Users</option>
            {% endif %}
            {% for category in categories %}
            <option value="{{ category.slug }}" {% if request.GET.category == category.slug %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
        <div class="absolute {% if is_mobile %}right-1 sm:right-2{% else %}right-2{% endif %} top-1/2 transform -translate-y-1/2 pointer-events-none">
            <svg class="{% if is_mobile %}h-3 w-3 sm:h-4 sm:w-4{% else %}h-4 w-4{% endif %} text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </div>
    </div>
    
    <!-- Search Input -->
    <div class="relative flex-1 flex items-center {% if is_mobile %}min-w-0{% endif %}">
        <div class="absolute {% if is_mobile %}left-2 sm:left-3{% else %}left-3{% endif %} z-10">
            <svg class="{% if is_mobile %}h-4 w-4 sm:h-5 sm:w-5{% else %}h-5 w-5{% endif %} text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
            </svg>
        </div>
        <input type="text" 
               name="q"
               placeholder="{% if is_mobile %}Search...{% else %}Search anything...{% endif %}" 
               class="w-full h-10 {% if is_mobile %}pl-8 sm:pl-12 pr-2 sm:pr-4 text-xs sm:text-sm{% else %}pl-12 pr-4 text-sm{% endif %} bg-transparent border-0 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 rounded-r-xl">
    </div>
</form>

