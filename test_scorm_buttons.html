<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCORM Button Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>SCORM Button Functionality Test</h1>
        <p>This test verifies that SCORM buttons are properly clickable and functional.</p>
        
        <div class="status" id="test-status">
            Ready to test SCORM button functionality...
        </div>
        
        <h3>Test Buttons</h3>
        <button class="test-button" id="start-button">START</button>
        <button class="test-button" id="continue-button">CONTINUE</button>
        <button class="test-button" id="resume-button">RESUME</button>
        <button class="test-button" id="play-button">PLAY</button>
        
        <h3>Test Log</h3>
        <div class="log" id="test-log"></div>
        
        <h3>SCORM API Status</h3>
        <div id="api-status">Not initialized</div>
    </div>

    <script>
        // Mock SCORM API for testing
        window.API = {
            _initialized: false,
            LMSInitialize: function(param) {
                log('SCORM API: LMSInitialize called');
                this._initialized = true;
                return 'true';
            },
            LMSFinish: function(param) {
                log('SCORM API: LMSFinish called');
                return 'true';
            },
            LMSGetValue: function(element) {
                log('SCORM API: LMSGetValue called for: ' + element);
                return 'test_value';
            },
            LMSSetValue: function(element, value) {
                log('SCORM API: LMSSetValue called: ' + element + ' = ' + value);
                return 'true';
            }
        };

        window.API_1484_11 = {
            Initialize: function(param) {
                log('SCORM 2004 API: Initialize called');
                return 'true';
            },
            Terminate: function(param) {
                log('SCORM 2004 API: Terminate called');
                return 'true';
            },
            GetValue: function(element) {
                log('SCORM 2004 API: GetValue called for: ' + element);
                return 'test_value';
            },
            SetValue: function(element, value) {
                log('SCORM 2004 API: SetValue called: ' + element + ' = ' + value);
                return 'true';
            }
        };

        function log(message) {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function updateStatus(message, type = 'success') {
            const statusDiv = document.getElementById('test-status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
        }

        function updateAPIStatus() {
            const apiStatusDiv = document.getElementById('api-status');
            if (window.API && window.API._initialized) {
                apiStatusDiv.textContent = 'SCORM API: Initialized ‚úÖ';
                apiStatusDiv.style.color = 'green';
            } else {
                apiStatusDiv.textContent = 'SCORM API: Not initialized ‚ùå';
                apiStatusDiv.style.color = 'red';
            }
        }

        // Test button click handlers
        function testButtonClick(buttonType) {
            log(`üéØ ${buttonType} button clicked`);
            
            try {
                // Ensure SCORM API is ready
                if (window.API && !window.API._initialized) {
                    log('üîÑ Initializing SCORM API for button click...');
                    window.API.LMSInitialize('');
                    window.API_1484_11.Initialize('');
                    window.API._initialized = true;
                    updateAPIStatus();
                }
                
                log(`‚úÖ ${buttonType} button handler executed successfully`);
                updateStatus(`${buttonType} button test passed!`, 'success');
                
            } catch (error) {
                log(`‚ùå Error in ${buttonType} button click handler: ${error.message}`);
                updateStatus(`${buttonType} button test failed: ${error.message}`, 'error');
            }
        }

        // Add event listeners to test buttons
        document.getElementById('start-button').addEventListener('click', function(e) {
            testButtonClick('START');
        });

        document.getElementById('continue-button').addEventListener('click', function(e) {
            testButtonClick('CONTINUE');
        });

        document.getElementById('resume-button').addEventListener('click', function(e) {
            testButtonClick('RESUME');
        });

        document.getElementById('play-button').addEventListener('click', function(e) {
            testButtonClick('PLAY');
        });

        // Initialize
        log('SCORM Button Test initialized');
        updateAPIStatus();
    </script>
</body>
</html>
